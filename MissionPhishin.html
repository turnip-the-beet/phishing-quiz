<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cybersecurity Protocol Training - Phishing Defense</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* General Body & Container Styling */
        body {
            font-family: 'Roboto Mono', monospace; /* Nerdy, code-like font */
            background-color: #1a1a2e; /* Deep space background */
            color: #e0e0e0; /* Light grey text */
            margin: 0;
            padding: 25px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10"><rect width="1" height="1" x="0" y="0" fill="%232c3e50" /></svg>'); /* Subtle pixel pattern */
            background-repeat: repeat;
        }

        .container {
            background-color: #0f3460; /* Darker blue, reminiscent of a terminal window */
            padding: 35px;
            border-radius: 12px; /* Slightly softer corners */
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4); /* Stronger shadow */
            max-width: 1700px;
            width: 100%;
            border: 2px solid #e94560; /* Accent color border */
            animation: glow 1.5s infinite alternate; /* Subtle glow effect */
        }

        @keyframes glow {
            from { box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4), 0 0 5px #e94560; }
            to { box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6), 0 0 20px #e94560; }
        }

        h1, h2 {
            font-family: 'Press Start 2P', cursive; /* Retro arcade font */
            color: #e94560; /* Vibrant accent color */
            text-align: center;
            margin-bottom: 25px;
            text-shadow: 0 0 8px rgba(233, 69, 96, 0.7);
        }

        p {
            color: #c0c0c0; /* Lighter grey for general text */
            text-align: center;
            margin-bottom: 35px;
            line-height: 1.7;
            font-size: 0.95em;
        }

        /* Quiz Specifics */
        .quiz-section {
            margin-bottom: 30px;
            border-bottom: 1px dashed #4e5d7a; /* Dashed separator */
            padding-bottom: 25px;
        }

        .quiz-section:last-of-type {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .question {
            font-size: 1.15em;
            margin-bottom: 20px;
            color: #72efdd; /* Another vibrant accent */
            font-weight: bold;
            text-shadow: 0 0 5px rgba(114, 239, 221, 0.5);
        }

        .options label {
            display: block;
            margin-bottom: 12px;
            padding: 12px;
            background-color: #1e3a5f; /* Slightly lighter blue for options */
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s ease, border 0.3s ease;
            border: 1px solid #1e3a5f;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        .options label:hover {
            background-color: #2b4f7e;
            border: 1px solid #72efdd;
        }

        .options input[type="radio"] {
            margin-right: 12px;
            accent-color: #e94560; /* Customizes the radio button color */
            transform: scale(1.2); /* Make radio buttons slightly larger */
            vertical-align: middle;
        }

        .feedback {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.9em;
            display: none; /* Hidden by default */
            font-weight: bold;
            text-align: center;
        }

        .feedback.correct {
            background-color: #2e8b57; /* Darker green */
            color: #d4edda;
            border: 1px solid #1c6b3e;
            box-shadow: 0 0 8px rgba(46, 139, 87, 0.7);
        }

        .feedback.incorrect {
            background-color: #8b2e2e; /* Darker red */
            color: #f8d7da;
            border: 1px solid #6b1c1c;
            box-shadow: 0 0 8px rgba(139, 46, 46, 0.7);
        }

        button {
            display: block;
            width: 100%;
            padding: 18px 25px;
            background-color: #e94560; /* Vibrant accent for button */
            color: #1a1a2e; /* Dark text on vibrant button */
            border: none;
            border-radius: 8px;
            font-size: 1.2em;
            font-family: 'Press Start 2P', cursive;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
            margin-top: 40px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        button:hover {
            background-color: #ff6b82; /* Lighter red on hover */
            transform: translateY(-2px); /* Slight lift effect */
        }

        button:active {
            transform: translateY(0);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        #results {
            margin-top: 40px;
            padding-top: 25px;
            border-top: 1px dashed #4e5d7a;
            text-align: center;
            display: none; /* Hidden by default */
            color: #c0c0c0;
        }

        #results h2 {
            color: #72efdd;
            margin-bottom: 25px;
            text-shadow: 0 0 8px rgba(114, 239, 221, 0.7);
        }

        #scoreDisplay {
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 20px;
            color: #e94560;
            font-family: 'Press Start 2P', cursive;
            text-shadow: 0 0 10px rgba(233, 69, 96, 0.9);
        }

        .review-section {
            text-align: left;
            margin-top: 30px;
            padding: 15px;
            background-color: #1e3a5f; /* Same as options background */
            border-radius: 8px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .review-section h3 {
            color: #72efdd;
            margin-bottom: 20px;
            font-family: 'Press Start 2P', cursive;
            font-size: 1em;
            text-shadow: 0 0 5px rgba(114, 239, 221, 0.5);
        }

        .review-item {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #0f3460; /* Same as container background */
            border-radius: 6px;
            border: 1px solid #4e5d7a;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .review-item .question-text {
            font-weight: bold;
            color: #e0e0e0;
            font-size: 1.05em;
            margin-bottom: 8px;
        }

        .review-item .your-answer, .review-item .correct-answer {
            font-size: 0.95em;
            margin-top: 5px;
            line-height: 1.5;
        }

        .review-item .your-answer {
            color: #ff6b82; /* Red for incorrect */
            font-weight: bold;
        }

        .review-item.correct .your-answer {
            color: #72efdd; /* Green for correct */
        }

        .review-item .correct-answer {
            color: #c0c0c0; /* Light grey for correct answer text */
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>// MISSION BRIEFING: PHISHING COUNTERMEASURES //</h1>
        <p>A recent simulation detected a vulnerability in your threat matrix. This module is designed to recalibrate your defenses against advanced social engineering tactics. Complete this sequence to fortify your cybersecurity protocols and become a true Data Guardian!</p>

        <form id="quizForm">
            <div class="user-info-section" style="margin-bottom: 30px; padding: 20px; background-color: #1e3a5f; border-radius: 8px;">
                <h3 style="color: #72efdd; font-family: 'Press Start 2P', cursive; text-align: center; margin-bottom: 20px;">// IDENTIFICATION REQUIRED //</h3>
                <label for="userName" style="display: block; margin-bottom: 15px; color: #c0c0c0;">
                    <span style="font-weight: bold; color: #e94560;">User Designation:</span>
                    <input type="text" id="userName" name="userName" required placeholder="Enter your Name"
                           style="width: calc(100% - 22px); padding: 10px; margin-top: 5px; background-color: #0f3460; border: 1px solid #4e5d7a; border-radius: 4px; color: #e0e0e0; font-family: 'Roboto Mono', monospace;">
                </label>
            </div>
        </form>

        <button type="button" id="submitQuiz">// DECRYPT & SUBMIT // </button>

        <div id="results">
            <h2>// POST-MISSION REPORT //</h2>
            <p id="scoreDisplay"></p>
            <div class="review-section" id="reviewSection">
                <h3>// THREAT ANALYSIS: REVIEW LOGS //</h3>
                </div>
            <p>Your vigilance is the ultimate firewall. Keep your guard up, recruit!</p>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "What should you do if you receive a suspicious email at your Xilio work address?",
                options: [
                    "Immediately forward the email to everyone in your contact list to warn them.",
                    "Use the Report Phish button to report it to IT, and post a screenshot of the email to the #security channel in Slack to spread awareness to fellow Xilians.",
                    "Reply to the sender asking them to confirm their identity before proceeding.",
                    "Delete the email and clear your trash, assuming it's been handled."
                ],
                correctAnswer: "Use the Report Phish button to report it to IT, and post a screenshot of the email to the #security channel in Slack to spread awareness to fellow Xilians."
            },
            {
                question: "How can you identify a potential phishing email sent to your Xilio account?",
                options: [
                    "Assume it's legitimate if it includes the Xilio logo and looks professional.",
                    "Inspect the domain of the From address, read the email carefully checking for urgent language pressuring you to act or threatening language such as “your account will be immediately shut down”, ask yourself if you were expecting an email regarding the topic.",
                    "Click all links and attachments to see where they lead and if they are malicious.",
                    "Only check if the sender's name is familiar; ignore the domain."
                ],
                correctAnswer: "Inspect the domain of the From address, read the email carefully checking for urgent language pressuring you to act or threatening language such as “your account will be immediately shut down”, ask yourself if you were expecting an email regarding the topic."
            },
            {
                question: "What action should you take if you think an email from a Xilio colleague might be a phishing attempt?",
                options: [
                    "Reply directly to the email to confront them about the suspicious message.",
                    "Reach out to the colleague on Slack or in person to verify the legitimacy of the email communication.",
                    "Ignore the email; your colleague wouldn't intentionally send a phishing attempt.",
                    "Forward the email to an external personal email address for a second opinion."
                ],
                correctAnswer: "Reach out to the colleague on Slack or in person to verify the legitimacy of the email communication."
            },
            {
                question: "If you accidentally clicked a link in a suspicious email, what should you do immediately?",
                options: [
                    "Quickly close the browser tab and restart your computer to clear any threats.",
                    "Inform the IT department if you think you have interacted with a phishing attempt.",
                    "Change all your passwords for every online account immediately, then inform IT.",
                    "Run a quick antivirus scan and only inform IT if malware is detected."
                ],
                correctAnswer: "Inform the IT department if you think you have interacted with a phishing attempt."
            },
            {
                question: "What are the warning signs that an email requesting your Xilio login credentials might be a phishing attempt?",
                options: [
                    "The email contains a secure-looking login portal with the Xilio logo.",
                    "No one, including any member of IT will ever ask for your credentials for any legitimate purpose.",
                    "It comes from a generic IT support email address requesting immediate action.",
                    "The email states your account is about to be suspended unless you verify credentials."
                ],
                correctAnswer: "No one, including any member of IT will ever ask for your credentials for any legitimate purpose."
            },
            {
                question: "What is Xilio's approved process for reporting suspected phishing emails?",
                options: [
                    "Stand up and scream 'The phish are coming!' down the halls like Paul Revere.",
                    "Use the integrated Report Phish button in your Outlook email.",
                    "Drag the email to your Junk folder and block the sender.",
                    "Forward the email to your personal email, then delete it from your Xilio inbox."
                ],
                correctAnswer: "Use the integrated Report Phish button in your Outlook email."
            },
            {
                question: "How should you verify the legitimacy of an unexpected email containing attachments from a Xilio vendor?",
                options: [
                    "Open the attachment in a sandbox environment to check its content before verifying.",
                    "Assume it's legitimate if it mentions a project you're currently working on.",
                    "If you have other approved ways of connecting with the vendor, for instance Slack, verify with them. If not inspect the email thoroughly for suspicious indications. Ask IT if you are unsure of an email communication, we are happy to help!",
                    "Call the vendor using the phone number provided in the suspicious email signature."
                ],
                correctAnswer: "If you have other approved ways of connecting with the vendor, for instance Slack, verify with them. If not inspect the email thoroughly for suspicious indications. Ask IT if you are unsure of an email communication, we are happy to help!"
            },
            {
                question: "How can you check if an email link is safe before clicking on it?",
                options: [
                    "Click the link quickly to see if it immediately triggers an alert.",
                    "Hover over any links or buttons in the email to inspect the URL and ensure it is taking you where it claims to be.",
                    "Right-click the link and copy it into a Google search bar to verify its safety.",
                    "Trust the link if it has a familiar-looking domain, even if the rest of the URL is long."
                ],
                correctAnswer: "Hover over any links or buttons in the email to inspect the URL and ensure it is taking you where it claims to be."
            },
            {
                question: "What security steps should you follow if you receive an unusual request from someone claiming to be from Xilio's executive team?",
                options: [
                    "Reply to the email immediately to confirm receipt of the request.",
                    "Fulfill the request if it seems urgent, assuming their authority.",
                    "Reach out to the member on Slack or in the office to confirm the legitimacy of any requests from the Executive Team.",
                    "Verify the request by calling the phone number provided in the email signature."
                ],
                correctAnswer: "Reach out to the member on Slack or in the office to confirm the legitimacy of any requests from the Executive Team."
            },
            {
                question: "In a galaxy far, far away, what is the best way to determine if a droid is indeed the one you're looking for?",
                options: [
                    "Ask it politely if it contains the Death Star plans; droids cannot lie.",
                    "Check its serial number against the galactic registry and observe for any unusual beeps or whirs.",
                    "Engage it in a philosophical debate about the nature of the Force.",
                    "Challenge it to a game of dejarik (holochess) and see if it cheats."
                ],
                correctAnswer: "Check its serial number against the galactic registry and observe for any unusual beeps or whirs."
            }
        ];

        const quizForm = document.getElementById('quizForm');
        const submitButton = document.getElementById('submitQuiz');
        const resultsDiv = document.getElementById('results');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const reviewSection = document.getElementById('reviewSection');

        // Add your Google Form's submission URL and Entry IDs here
        const GOOGLE_FORM_URL = 'https://docs.google.com/forms/u/0/d/e/1FAIpQLSfMHJq9W-qKxWqhm5m6vMl_gGgfB3krYR6wyJNkkABUmqdk-Q/formResponse';
        const ENTRY_ID_NAME = 'entry.111111575';
        const ENTRY_ID_SCORE = 'entry.1765582635';
        const ENTRY_ID_INCORRECT = 'entry.574895424';

        function loadQuiz() {
            questions.forEach((q, index) => {
                const questionSection = document.createElement('div');
                questionSection.classList.add('quiz-section');
                questionSection.innerHTML = `
                    <div class="question">${index + 1}. ${q.question}</div>
                    <div class="options" id="q${index}-options">
                        ${q.options.map((option) => `
                            <label>
                                <input type="radio" name="question${index}" value="${option}">
                                ${option}
                            </label>
                        `).join('')}
                    </div>
                    <div class="feedback" id="feedback${index}"></div>
                `;
                quizForm.appendChild(questionSection);
            });
        }

        function getSelectedAnswer(questionIndex) {
            const selectedOption = document.querySelector(`input[name="question${questionIndex}"]:checked`);
            return selectedOption ? selectedOption.value : null;
        }

        function checkAnswers() {
            let score = 0;
            const userAnswers = [];
            let allAnswered = true;
            const incorrectQuestionsReview = []; // To store details of incorrect answers

            // Get user's name/ID from the input field FIRST
            const userNameInput = document.getElementById('userName');
            const userName = userNameInput ? userNameInput.value.trim() : ''; // Get value, default to empty if input not found

            if (!userName) {
                alert("Alert: Please enter your name/ID before submitting the quiz.");
                if (userNameInput) userNameInput.focus(); // Focus on the input if it exists
                return; // Stop the function here if name is missing
            }

            questions.forEach((q, index) => {
                const userAnswer = getSelectedAnswer(index);
                if (userAnswer === null) {
                    allAnswered = false; // Flag if any question is unanswered
                }

                userAnswers.push({
                    question: q.question,
                    yourAnswer: userAnswer,
                    correctAnswer: q.correctAnswer
                });

                const feedbackDiv = document.getElementById(`feedback${index}`);
                feedbackDiv.style.display = 'block';
                feedbackDiv.classList.remove('correct', 'incorrect');

                // --- MODIFICATION FOR QUESTION 10 (INDEX 9) ---
                if (index === 9) { // This targets the 10th question (index 9, as arrays are 0-indexed)
                    score++; // Always give a point for this question
                    feedbackDiv.classList.add('correct');
                    feedbackDiv.textContent = "// STATUS: CORRECT // Fun fact acknowledged!";
                } else if (userAnswer === q.correctAnswer) {
                    score++;
                    feedbackDiv.classList.add('correct');
                    feedbackDiv.textContent = "// STATUS: CORRECT // Data integrity maintained!";
                } else {
                    feedbackDiv.classList.add('incorrect');
                    feedbackDiv.textContent = `// STATUS: INCORRECT // Correct protocol: "${q.correctAnswer}"`;
                    // Only add to incorrect review if it's NOT the wacky question and it's actually wrong
                    incorrectQuestionsReview.push(`${index + 1}. ${q.question} (Your answer: "${userAnswer || 'No answer selected'}")`);
                }
            });

            // Check if all questions were answered AFTER checking for name
            if (!allAnswered) {
                alert("Alert: Not all questions have been answered. Please complete the full diagnostic before submitting.");
                return;
            }


            displayResults(score, userAnswers); // Display results on the page
            sendResultsToGoogleForm(userName, score, incorrectQuestionsReview.join('\n')); // Send results to Google Form
        }

        function displayResults(score, userAnswers) {
            submitButton.style.display = 'none'; // Hide submit button
            resultsDiv.style.display = 'block'; // Show results section
            scoreDisplay.textContent = `// SCORE: ${score} / ${questions.length} //`;

            // Scroll to results
            resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });

            reviewSection.innerHTML = '<h3>// THREAT ANALYSIS: REVIEW LOGS //</h3>'; // Clear previous review
            userAnswers.forEach((item, index) => {
                const reviewItem = document.createElement('div');
                reviewItem.classList.add('review-item');
                // Review section should also mark Q10 as correct visually, even if user chose differently
                if (item.yourAnswer === item.correctAnswer || index === 9) {
                    reviewItem.classList.add('correct');
                }

                reviewItem.innerHTML = `
                    <div class="question-text">${index + 1}. ${item.question}</div>
                    <div class="your-answer">Your Input: ${item.yourAnswer || '[NO INPUT DETECTED]'}</div>
                    <div class="correct-answer">Optimal Protocol: ${item.correctAnswer}</div>
                `;
                reviewSection.appendChild(reviewItem);
            });
        }

        // --- NEW FUNCTION TO SEND DATA ---
        function sendResultsToGoogleForm(userName, score, incorrectDetails) {
            const formData = new FormData();
            formData.append(ENTRY_ID_NAME, userName);
            formData.append(ENTRY_ID_SCORE, `${score}/${questions.length}`);
            formData.append(ENTRY_ID_INCORRECT, incorrectDetails);

            fetch(GOOGLE_FORM_URL, {
                method: 'POST',
                body: formData,
                mode: 'no-cors' // Important for cross-origin requests to Google Forms
            })
            .then(response => {
                console.log('Quiz results sent to Google Form successfully (no-cors mode).');
                // You can add a small visual confirmation to the user here if you want
                // E.g., a tiny "Results submitted!" message next to the score.
            })
            .catch(error => {
                console.error('Error sending quiz results:', error);
                // Handle errors, e.g., display a message to the user
                alert("An error occurred while submitting results. Please inform IT if this persists.");
            });
        }
        // --- END NEW FUNCTION ---

        // Event Listener for quiz submission
        submitButton.addEventListener('click', checkAnswers);

        // Load the quiz when the page loads
        document.addEventListener('DOMContentLoaded', loadQuiz);
    </script>
</body>
</html>

